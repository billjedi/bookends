{%- from "macros.html" import nav_link with context -%}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1;"/>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/unsemantic.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/bookends.css') }}" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}" />
        <title>Bookends</title>
    </head>
    <body>
        <div id="navigation" class="grid-20">
            <p id="branding-text">{ Bookends }</p>
            <ul id="nav">
                {{ nav_link('index', 'Home') }}
                {{ nav_link('add_book', 'Add a book', classes="add-book-link") }}
                {{ nav_link('books', 'Browse books') }}
                {{ nav_link('sets', 'Browse sets') }}
                {{ nav_link('account_email', 'Account', account=True) }}
                {{ nav_link('signout', 'Sign out') }}
            </ul>
        <div class="status">
        {% for message in get_flashed_messages() %}
            <p>Status: {{ message|safe }}</p>
        {% endfor %}
        </div>
        </div>
        <div id="content-area" class="grid-80">
        {% block body %}
        {% endblock %}
        </div>

        {% if current_user.books.all()|length == 0 and request.endpoint == 'index' %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/jquery.js') }}"></script>
        <script type="text/javascript">
        $(document).ready(function() {
            window.setTimeout(animateAddBook, 2000);

            function animateAddBook() {
                $('.add-book-link').addClass('animated bounce');
            }
        });
        </script>
        {% endif %}
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-42664438-1', 'getbookends.com');
        ga('send', 'pageview');

        </script>
    </body>
</html>
